function isHoliday(e){if(0==e.getMonth()){if(1==e.getDate())return"New Year’s Day";if(1==e.getDay()&&15<=e.getDate()&&e.getDate()<=21)return"Birthday of Martin Luther King, Jr."}if(1==e.getMonth()&&1==e.getDay()&&15<=e.getDate()&&e.getDate()<=21)return"Washington’s Birthday";if(4==e.getMonth()&&1==e.getDay()&&25<=e.getDate()&&e.getDate()<=31)return"Memorial Day";if(6==e.getMonth()&&4==e.getDate())return"Independence Day";if(8==e.getMonth()&&1==e.getDay()&&1<=e.getDate()&&e.getDate()<=7)return"Labor Day";if(9==e.getMonth()&&1==e.getDay()&&8<=e.getDate()&&e.getDate()<=14)return"Columbus Day";if(10==e.getMonth()){if(11==e.getDate())return"Veterans Day";if(4==e.getDay()&&22<=e.getDate()&&e.getDate()<=28)return"Thanksgiving Day"}return 11==e.getMonth()&&25==e.getDate()&&"Christmas Day"}function getNthOfMonth(e,t,r,o){for(var n,a=0;o;)(n=new Date(e,t,++a)).getDay()==r&&o--;return n.getMonth()==t&&n}function getLastOfMonth(e,t,r){for(var o,n=1,a=new Date(e,t+1,0).getDate();n;)(o=new Date(e,t,a--)).getDay()==r&&o.getMonth()==t&&n--;return o}function getHoliday(e,t){if(!e||!t)return!1;switch(e){case"New Year's Day":case"New Year’s Day":return new Date(t,0,1);case"Birthday of Martin Luther King, Jr.":return getNthOfMonth(t,0,1,3);case"Washington's Birthday":case"Washington’s Birthday":return getNthOfMonth(t,1,1,3);case"Memorial Day":return getLastOfMonth(t,4,1);case"Independence Day":return new Date(t,6,1);case"Labor Day":return getNthOfMonth(t,8,1,1);case"Columbus Day":return getNthOfMonth(t,9,1,2);case"Veterans Day":return new Date(t,10,11);case"Thanksgiving Day":return getNthOfMonth(t,10,4,4);case"Christmas Day":return new Date(t,11,25);default:return!1}}var now=new Date,today=now.getDay()+1,todayIsHoliday=isHoliday(now),daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],theMonths=["January","February","March","April","May","June","July","August","September","October","November","December"];function getUrlParameters(e){for(var t={},r=/[\?\&]([A-z]*)[\=]([A-z,\-0-9]*)/g,o=!0;o;)(o=r.exec(e))&&(t[o[1]]=o[2]);return t}for(var parameters=getUrlParameters(document.currentScript.src),parks=parameters.park.split(","),p=0;p<parks.length;p++)!function(){var t=parks[p];jQuery.ajax({url:"/"+t+"/structured_data_"+t+".json",success:function(e){loadStructuredData(e,t,function(e){jQuery.ajax("/"+e+"/nps-alerts-"+e+".json",{success:function(e){loadAlertsData(e)}})})}})}();function loadAlertsData(e){for(var t=jQuery(document).find("[data-alerts]"),r=0;r<t.length;r++){var o=getAlert(e,t[r].getAttribute("data-alerts"));o&&(t[r].innerHTML=o)}}function getAlert(e,t){for(var r="",o=0;o<e.CEDATA.length;o++)e.CEDATA[o].FIC_title==t&&new Date(e.CEDATA[o].FIC_end_date.split(" ")[0]+"T23:59:00")>=now&&now>=new Date(e.CEDATA[o].FIC_start_date.split(" ")[0]+"T00:00:00")&&(r+=e.CEDATA[o].FIC_description);return r}function loadStructuredData(e,t,r){for(var o=jQuery(document).find("[data-hours-now]"),n=0;n<o.length;n++){(s=getCurrentHours(e,o[n].getAttribute("data-hours-now")))&&(o[n].innerHTML=s)}var a=jQuery(document).find("[data-hours-current]");for(n=0;n<a.length;n++){(s=getCurrentSeason(e,a[n].getAttribute("data-hours-current")))&&(a[n].innerHTML=s)}for(a=jQuery(document).find("[data-hours-season]"),n=0;n<a.length;n++){var s;(s=getSeasonHours(e,a[n].getAttribute("data-hours-season")))&&(a[n].innerHTML=s)}for(var i=jQuery(document).find("[data-hours-description]"),u=0;u<i.length;u++)for(n=0;n<e.operatingHours.length;n++)e.operatingHours[n].operatingScheduleID==i[u].getAttribute("data-hours-description")&&(i[u].innerHTML=e.operatingHours[n].description);var g=jQuery(document).find("[data-fees]");for(u=0;u<g.length;u++){var l="<ul>",d=!1;for(n=0;n<e.entranceFees.length;n++)e.entranceFees[n].title==g[u].getAttribute("data-fees")&&(d=!0,l+="<li>",l+=e.entranceFees[n].description+": ",l+=e.entranceFees[n].cost,l+="</li>");d&&(g[u].innerHTML=l+"</ul>")}r(t)}function getCurrentSeason(e,t){for(var r=0;r<e.operatingHours.length;r++)if(e.operatingHours[r].operatingScheduleID==t){if(e.operatingHours[r].exceptions)for(var o=0;o<e.operatingHours[r].exceptions.length;o++){if(todayIsHoliday&&todayIsHoliday==e.operatingHours[r].exceptions[o].holiday_start&&todayIsHoliday==e.operatingHours[r].exceptions[o].holiday_end)return"<ul><li>"+e.operatingHours[r].exceptions[o].name+"<ul>"+judgeSeason(e.operatingHours[r].exceptions[o].schedule)+"</ul></li></ul>";var n="";n=""!=e.operatingHours[r].exceptions[o].holiday_start?getHoliday(e.operatingHours[r].exceptions[o].holiday_start,now.getFullYear()):new Date(e.operatingHours[r].exceptions[o].date_start+" "+now.getFullYear());var a="";if(a=""!=e.operatingHours[r].exceptions[o].holiday_end?getHoliday(e.operatingHours[r].exceptions[o].holiday_end,now.getFullYear()):new Date(e.operatingHours[r].exceptions[o].date_end+" "+now.getFullYear()),""!=e.operatingHours[r].exceptions[o].holiday_start&&e.operatingHours[r].exceptions[o].holiday_start!=e.operatingHours[r].exceptions[o].holiday_end||""!=e.operatingHours[r].exceptions[o].date_start){if(n<=now){if(now<=a)return"<ul><li>"+e.operatingHours[r].exceptions[o].name+" ("+theMonths[n.getMonth()]+" "+n.getDate()+" - "+theMonths[a.getMonth()]+" "+a.getDate()+"):<ul>"+judgeSeason(e.operatingHours[r].exceptions[o].schedule)+"</ul></li></ul>";if(a<n)return"<ul><li>"+e.operatingHours[r].exceptions[o].name+" ("+theMonths[n.getMonth()]+" "+n.getDate()+" - "+theMonths[a.getMonth()]+" "+a.getDate()+"):<ul>"+judgeSeason(e.operatingHours[r].exceptions[o].schedule)+"</ul></li></ul>";continue}if(a<n&&now<=a)return"<ul><li>"+e.operatingHours[r].exceptions[o].name+" ("+theMonths[n.getMonth()]+" "+n.getDate()+" - "+theMonths[a.getMonth()]+" "+a.getDate()+"):<ul>"+judgeSeason(e.operatingHours[r].exceptions[o].schedule)+"</ul></li></ul>"}else;}return"<ul><li>Standard Hours:<ul>"+judgeSeason(e.operatingHours[r].hours)+"</ul></li></ul>"}}function getSeasonHours(e,t){for(var r="",o=0;o<e.operatingHours.length;o++)if(e.operatingHours[o].operatingScheduleID==t){r="<ul>",r+="<li>Standard Hours:",r+="<ul>"+judgeSeason(e.operatingHours[o].hours)+"</ul>",r+="</li>";var n=[],a=[];if(e.operatingHours[o].exceptions)for(var s=0;s<e.operatingHours[o].exceptions.length;s++)if(""!=e.operatingHours[o].exceptions[s].holiday_start||""!=e.operatingHours[o].exceptions[s].date_start){var i=new Date(e.operatingHours[o].exceptions[s].date_start+" "+now.getFullYear());""!=e.operatingHours[o].exceptions[s].holiday_start&&(i=getHoliday(e.operatingHours[o].exceptions[s].holiday_start,now.getFullYear()));var u=new Date(e.operatingHours[o].exceptions[s].date_end+" "+now.getFullYear());""!=e.operatingHours[o].exceptions[s].holiday_end&&(u=getHoliday(e.operatingHours[o].exceptions[s].holiday_end,now.getFullYear()));var g="<li>";e.operatingHours[o].exceptions[s].holiday_start==e.operatingHours[o].exceptions[s].holiday_end&&""!=e.operatingHours[o].exceptions[s].holiday_start?(g+=e.operatingHours[o].exceptions[s].name+":",g+="<ul>"+judgeSeason(e.operatingHours[o].exceptions[s].schedule)+"</ul>",g+="</li>",a.push({start:i,name:e.operatingHours[o].exceptions[s].name,text:g})):(g+=e.operatingHours[o].exceptions[s].name+" (",""!=e.operatingHours[o].exceptions[s].holiday_start?g+=e.operatingHours[o].exceptions[s].holiday_start:g+=theMonths[i.getMonth()]+" "+i.getDate(),""!=e.operatingHours[o].exceptions[s].holiday_end?g+=" - "+e.operatingHours[o].exceptions[s].holiday_end+"):":i.toISOString()!=u.toISOString()?g+=" - "+theMonths[u.getMonth()]+" "+u.getDate()+"):":g+="):",g+="<ul>"+judgeSeason(e.operatingHours[o].exceptions[s].schedule)+"</ul>",g+="</li>",n.push({start:i,name:e.operatingHours[o].exceptions[s].name,text:g}))}sortExceptions(n);for(s=0;s<n.length;s++)r+=n[s].text;sortExceptions(a);for(s=0;s<a.length;s++)r+=a[s].text;return r+="</ul>"}return!1}function sortExceptions(e){for(var t=1;t<e.length;t++)if(e[t-1].start>e[t].start){var r=e[t-1],o=e[t];e.splice(t,1,r),e.splice(t-1,1,o),sortExceptions(e)}return e}function getCurrentHours(e,t){for(var r=0;r<e.operatingHours.length;r++)if(e.operatingHours[r].operatingScheduleID==t){if(e.operatingHours[r].exceptions)for(var o=0;o<e.operatingHours[r].exceptions.length;o++){if(todayIsHoliday&&todayIsHoliday==e.operatingHours[r].exceptions[o].holiday_start&&todayIsHoliday==e.operatingHours[r].exceptions[o].holiday_end)for(var n=0;n<e.operatingHours[r].exceptions[o].schedule.length;n++)if(e.operatingHours[r].exceptions[o].schedule[n].dayOfWeek==today)return judgeHours(e.operatingHours[r].exceptions[o].schedule[n]);var a="";a=""!=e.operatingHours[r].exceptions[o].holiday_start?getHoliday(e.operatingHours[r].exceptions[o].holiday_start,now.getFullYear()):new Date(e.operatingHours[r].exceptions[o].date_start+" "+now.getFullYear());var s="";if(s=""!=e.operatingHours[r].exceptions[o].holiday_end?getHoliday(e.operatingHours[r].exceptions[o].holiday_end,now.getFullYear()):new Date(e.operatingHours[r].exceptions[o].date_end+" "+now.getFullYear()),""!=e.operatingHours[r].exceptions[o].holiday_start&&e.operatingHours[r].exceptions[o].holiday_start!=e.operatingHours[r].exceptions[o].holiday_end||""!=e.operatingHours[r].exceptions[o].date_start)if(a<=now)if(now<=s){for(n=0;n<e.operatingHours[r].exceptions[o].schedule.length;n++)if(e.operatingHours[r].exceptions[o].schedule[n].dayOfWeek==today)return judgeHours(e.operatingHours[r].exceptions[o].schedule[n])}else{if(!(s<a))continue;for(n=0;n<e.operatingHours[r].exceptions[o].schedule.length;n++)if(e.operatingHours[r].exceptions[o].schedule[n].dayOfWeek==today)return judgeHours(e.operatingHours[r].exceptions[o].schedule[n])}else{if(!(s<a&&now<=s))continue;for(n=0;n<e.operatingHours[r].exceptions[o].schedule.length;n++)if(e.operatingHours[r].exceptions[o].schedule[n].dayOfWeek==today)return judgeHours(e.operatingHours[r].exceptions[o].schedule[n])}}for(o=0;o<e.operatingHours[r].hours.length;o++)if(e.operatingHours[r].hours[o].dayOfWeek==today)return judgeHours(e.operatingHours[r].hours[o])}return!1}function judgeHours(e){var t="";return e.is_closed?t="Closed.":(t="Open ",e.sunrise_open?t+="Sunrise ":t+=e.time_open+" ",e.sunset_close?t+="- Sunset.":t+="- "+e.time_close+"."),t}function judgeSeason(e){var t="";dailyHours={};for(var r=0;r<e.length;r++)dailyHours[daysOfWeek[e[r].dayOfWeek-1]]=judgeHours(e[r]);referenceDay=0;for(r=1;r<daysOfWeek.length;r++)dailyHours[daysOfWeek[referenceDay]]==dailyHours[daysOfWeek[r]]?(0==referenceDay&&6==r&&(t+="<li>"+dailyHours[daysOfWeek[r]]+"</li>"),0<referenceDay&&6==r&&(t+="<li>"+daysOfWeek[referenceDay]+" - "+daysOfWeek[r]+": "+dailyHours[daysOfWeek[referenceDay]]+"</li>")):(r-1==referenceDay?t+="<li>"+daysOfWeek[referenceDay]+": "+dailyHours[daysOfWeek[referenceDay]]+"</li>":t+="<li>"+daysOfWeek[referenceDay]+" - "+daysOfWeek[r-1]+": "+dailyHours[daysOfWeek[referenceDay]]+"</li>",6==(referenceDay=r)&&(t+="<li>"+daysOfWeek[referenceDay]+": "+dailyHours[daysOfWeek[referenceDay]]+"</li>"));return t}
